{% extends "base.html" %}
{% block title%}View Climb {{ climb.name }}{% endblock %}
{% block extra_css %}
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <link rel="stylesheet" href="/static/css/view_climb.css">
{% endblock %}

{% block content %}

    <div class="body">
        <div class="view-climb-container">
            <div class="view-climb-heading">
                <h1>Climb Details: {{ climb.name }}</h1>
            </div>
            <div class="view-climb-details">
                <div class="detail-grid">
                    <div class="detail-box">
                        <span class="detail-label">Name</span>
                        <span class="detail-value">{{ climb.name }}</span>
                    </div>
                    <div class="detail-box">
                        <span class="detail-label">Description</span>
                        <span class="detail-value">{{ climb.description if climb.description else "N/A" }}</span>
                    </div>
                    <div class="detail-box">
                        <span class="detail-label">Date</span>
                        <span class="detail-value">{{ climb.date.strftime('%Y-%m-%d') }}</span>
                    </div>
                    <div class="detail-box">
                        <span class="detail-label">Attempts</span>
                        <span class="detail-value">{{ climb.attempts }}</span>
                    </div>
                    <div class="detail-box">
                        <span class="detail-label">Grade</span>
                        <span class="detail-value">{{ climb.grade }}</span>
                    </div>
                    <div class="detail-box">
                        <span class="detail-label">Completed</span>
                        <span class="detail-value">{{ "Yes" if climb.complete else "No" }}</span>
                    </div>
                    <div class="media-section">
                        <h3>
                            Photos and Videos
                        </h3>
                        {% if has_media %}
                            <div class="media-strip">
                                {% for media in media_files %}
                                    <div class="media-item">
                                        {% if media.mime.startswith('image/') %}
                                            <img src="{{ media.url }}" alt="{{ media.filename }}" class="media-thumb">
                                            
                                        {% elif media.mime.startswith('video/') %}
                                        <div class="media-thumb video-wrapper">
                                            <video controls class="media-thumb">
                                                <source src="{{ media.url }}" type="{{ media.mime }}">
                                            </video>
                                        </div>
                                        {% else %}
                                            <a href="{{ media.url }}" target="_blank">{{ media.filename }}</a>
                                        {% endif %}
                                    </div>
                                {% endfor %}
                            </div>
                        {% else %}
                            <p>No media available for this climb.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
            <div class="view-climb-actions">
                <a href="/user/my_tracker" class="btn btn-secondary">Back to Dashboard</a>
            </div>
            <div class="media-modal hidden" id="media-modal"> 
                <div class = "media-modal-background">
                </div>
                <div class = "media-modal-content">

                </div>
            </div>
        </div>
    </div>
    {% endblock %}
    {% block extra_scripts%}
    <script src="/static/js/view_climb.js"></script>
    {% endblock%}